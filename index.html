<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SimpleCheckout - Credit Card Storage</title>
  </head>
  <body>
    <div id="simplecheckout-container"></div>

    <script type="module">
      import SimpleCheckout from './dist/SimpleCheckout.js';

      // Get API key from URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      const publishableKey = urlParams.get('publishable_key');

      if (!publishableKey) {
        document.body.innerHTML = `
          <div style="text-align: center; padding: 50px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;">
            <h1>SimpleCheckout</h1>
            <p>Please provide an API key via URL parameter: <code>?publishable_key=your_publishable_key</code></p>
          </div>
        `;
      } else {
        // Initialize SimpleCheckout
        const simplecheckout = new SimpleCheckout(publishableKey);

        // Create and mount the credit card form
        simplecheckout.initEmbeddedCreditCardForm({
          onSuccess: (result) => {
            console.log('Card stored successfully:', result);
          },
          onError: (error) => {
            console.error('Error storing card:', error);
          }
        }).then(creditCardForm => {
          creditCardForm.mount('#simplecheckout-container');
        });
      }
    </script>
  </body>
</html> 